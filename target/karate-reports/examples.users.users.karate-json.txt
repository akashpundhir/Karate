{"failedCount":3,"prefixedPath":"classpath:examples\/users\/users.feature","packageQualifiedName":"examples.users.users","loopIndex":-1,"relativePath":"examples\/users\/users.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":70457500,"millis":70.4575,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"def config = karate.callSingle('classpath:karate-config.js')"},"stepLog":"00:38:32.208 >>> Environment: dev \n00:38:32.214 >>> baseUrl: http:\/\/localhost:8080\/api \n00:38:32.289 >> lock acquired, begin callSingle: classpath:karate-config.js\n00:38:32.292 >>> Environment: dev \n00:38:32.293 >>> baseUrl: http:\/\/localhost:8080\/api \n00:38:32.296 << lock released, cached callSingle: classpath:karate-config.js\n"},{"result":{"nanos":2379600,"millis":2.3796,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"def baseUrl = config.baseUrl"}},{"result":{"nanos":13439500,"millis":13.4395,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":2,"text":"def KafkaUtils = Java.type('examples.users.KafkaUtils')"}},{"result":{"nanos":16482300,"millis":16.4823,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":3,"text":"def kafkaUtils = new KafkaUtils(config.kafka.bootstrapServers, config.security.kafkaUsername, config.security.kafkaPassword)"}},{"result":{"nanos":1871500,"millis":1.8715,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":4,"text":"def kafkaTopic = config.kafka.topics.todoEvents"}},{"result":{"nanos":1703700,"millis":1.7037,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":5,"text":"def consumerGroup = config.kafka.consumerGroup"}},{"result":{"nanos":3327800,"millis":3.3278,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":6,"text":"def timeoutMs = config.kafka.timeoutMs"}},{"result":{"nanos":876629700,"errorMessage":"js failed:\n>>>>\n01: karate.call('classpath:examples\/users\/todo-kafka.feature@getAllTodos')\n<<<<\norg.graalvm.polyglot.PolyglotException: http call failed after 756 milliseconds for url: http:\/\/localhost:8080\/api\nclasspath:examples\/users\/todo-kafka.feature:19\n- com.intuit.karate.core.FeatureResult.getErrorMessagesCombined(FeatureResult.java:215)\n- com.intuit.karate.core.ScenarioEngine.callFeature(ScenarioEngine.java:1951)\n- com.intuit.karate.core.ScenarioEngine.call(ScenarioEngine.java:1849)\n- com.intuit.karate.core.ScenarioBridge.call(ScenarioBridge.java:163)\n- com.intuit.karate.core.ScenarioBridge.call(ScenarioBridge.java:149)\n- <js>.:program(Unnamed:1)\n\nclasspath:examples\/users\/users.feature:13","millis":876.6297,"status":"failed"},"step":{"comments":["# Clear existing todos before each run"],"background":true,"line":13,"prefix":"*","index":7,"text":"def all = karate.call('classpath:examples\/users\/todo-kafka.feature@getAllTodos')"},"stepLog":"00:38:33.277 classpath:examples\/users\/users.feature:13\n* def all = karate.call('classpath:examples\/users\/todo-kafka.feature@getAllTodos')\njs failed:\n>>>>\n01: karate.call('classpath:examples\/users\/todo-kafka.feature@getAllTodos')\n<<<<\norg.graalvm.polyglot.PolyglotException: http call failed after 756 milliseconds for url: http:\/\/localhost:8080\/api\nclasspath:examples\/users\/todo-kafka.feature:19\n- com.intuit.karate.core.FeatureResult.getErrorMessagesCombined(FeatureResult.java:215)\n- com.intuit.karate.core.ScenarioEngine.callFeature(ScenarioEngine.java:1951)\n- com.intuit.karate.core.ScenarioEngine.call(ScenarioEngine.java:1849)\n- com.intuit.karate.core.ScenarioBridge.call(ScenarioBridge.java:163)\n- com.intuit.karate.core.ScenarioBridge.call(ScenarioBridge.java:149)\n- <js>.:program(Unnamed:1)\n\nclasspath:examples\/users\/users.feature:13\n","callResults":[{"failedCount":1,"prefixedPath":"classpath:examples\/users\/todo-kafka.feature","packageQualifiedName":"examples.users.todo-kafka","loopIndex":-1,"relativePath":"examples\/users\/todo-kafka.feature","scenarioResults":[{"sectionIndex":1,"stepResults":[{"result":{"nanos":1790100,"millis":1.7901,"status":"passed"},"step":{"line":18,"prefix":"Given","index":0,"text":"url config.baseUrl"}},{"result":{"nanos":772606900,"errorMessage":"http call failed after 756 milliseconds for url: http:\/\/localhost:8080\/api\nclasspath:examples\/users\/todo-kafka.feature:19","millis":772.6069,"status":"failed"},"step":{"line":19,"prefix":"When","index":1,"text":"method get"},"stepLog":"00:38:33.187 request:\n1 > GET http:\/\/localhost:8080\/api\n1 > Host: localhost:8080\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/17.0.12)\n1 > Accept-Encoding: gzip,deflate\n\n\n00:38:33.242 org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost\/127.0.0.1, localhost\/0:0:0:0:0:0:0:1] failed: Connection refused: no further information, http call failed after 756 milliseconds for url: http:\/\/localhost:8080\/api\n00:38:33.243 classpath:examples\/users\/todo-kafka.feature:19\nWhen method get\nhttp call failed after 756 milliseconds for url: http:\/\/localhost:8080\/api\nclasspath:examples\/users\/todo-kafka.feature:19\n"},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":20,"prefix":"Then","index":2,"text":"status 200"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":21,"prefix":"*","index":3,"text":"return response"}}],"line":17,"description":"","durationMillis":774.397,"failed":true,"error":"http call failed after 756 milliseconds for url: http:\/\/localhost:8080\/api\nclasspath:examples\/users\/todo-kafka.feature:19","tags":["getAllTodos"],"executorName":"main","name":"Get all todos","startTime":1763509112467,"refId":"[2:17]","endTime":1763509113243,"exampleIndex":-1}],"callDepth":1,"name":"Reusable Todo Helper Scenarios","description":"","resultDate":"2025-11-19 12:38:33 am","durationMillis":774.397,"passedCount":0}]},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"endLine":19,"background":true,"line":14,"prefix":"*","docString":"for (var i = 0; i < all.length; i++) {\n  karate.call('classpath:examples\/users\/todo-kafka.feature@deleteTodo', { id: all[i].id });\n}","index":8,"text":"eval"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"background":true,"line":20,"prefix":"*","index":9,"text":"eval kafkaUtils.consumeMessages(kafkaTopic, consumerGroup, 100, 2)"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":24,"prefix":"Given","index":0,"text":"url baseUrl"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":25,"prefix":"And","index":1,"text":"request { title: 'First', complete: false }"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":26,"prefix":"When","index":2,"text":"method post"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":27,"prefix":"Then","index":3,"text":"status 200"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":28,"prefix":"And","index":4,"text":"match response == { id: '#string', title: 'First', complete: false }"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":29,"prefix":"*","index":5,"text":"def id = response.id"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"comments":["# Kafka message verification"],"line":32,"prefix":"*","index":6,"text":"def kafkaMessage = kafkaUtils.waitForMessage(kafkaTopic, id, timeoutMs \/ 1000)"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":33,"prefix":"*","index":7,"text":"match kafkaMessage != null"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":34,"prefix":"*","index":8,"text":"match kafkaMessage.value contains '\"eventType\":\"TODO_CREATED\"'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":35,"prefix":"*","index":9,"text":"match kafkaMessage.value contains '\"todoId\":\"#(id)\"'"}}],"line":23,"description":"","durationMillis":986.2916,"failed":true,"error":"js failed:\n>>>>\n01: karate.call('classpath:examples\/users\/todo-kafka.feature@getAllTodos')\n<<<<\norg.graalvm.polyglot.PolyglotException: http call failed after 756 milliseconds for url: http:\/\/localhost:8080\/api\nclasspath:examples\/users\/todo-kafka.feature:19\n- com.intuit.karate.core.FeatureResult.getErrorMessagesCombined(FeatureResult.java:215)\n- com.intuit.karate.core.ScenarioEngine.callFeature(ScenarioEngine.java:1951)\n- com.intuit.karate.core.ScenarioEngine.call(ScenarioEngine.java:1849)\n- com.intuit.karate.core.ScenarioBridge.call(ScenarioBridge.java:163)\n- com.intuit.karate.core.ScenarioBridge.call(ScenarioBridge.java:149)\n- <js>.:program(Unnamed:1)\n\nclasspath:examples\/users\/users.feature:13","tags":["atdd"],"executorName":"main","name":"Create todo and verify Kafka event","startTime":1763509111804,"refId":"[1:23]","endTime":1763509113277,"exampleIndex":-1},{"sectionIndex":1,"stepResults":[{"result":{"nanos":1049400,"millis":1.0494,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"def config = karate.callSingle('classpath:karate-config.js')"},"stepLog":"00:38:33.334 >>> Environment: dev \n00:38:33.336 >>> baseUrl: http:\/\/localhost:8080\/api \n"},{"result":{"nanos":4050000,"millis":4.05,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"def baseUrl = config.baseUrl"}},{"result":{"nanos":786900,"millis":0.7869,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":2,"text":"def KafkaUtils = Java.type('examples.users.KafkaUtils')"}},{"result":{"nanos":1412700,"millis":1.4127,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":3,"text":"def kafkaUtils = new KafkaUtils(config.kafka.bootstrapServers, config.security.kafkaUsername, config.security.kafkaPassword)"}},{"result":{"nanos":1298500,"millis":1.2985,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":4,"text":"def kafkaTopic = config.kafka.topics.todoEvents"}},{"result":{"nanos":999500,"millis":0.9995,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":5,"text":"def consumerGroup = config.kafka.consumerGroup"}},{"result":{"nanos":2365200,"millis":2.3652,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":6,"text":"def timeoutMs = config.kafka.timeoutMs"}},{"result":{"nanos":52784800,"errorMessage":"js failed:\n>>>>\n01: karate.call('classpath:examples\/users\/todo-kafka.feature@getAllTodos')\n<<<<\norg.graalvm.polyglot.PolyglotException: http call failed after 11 milliseconds for url: http:\/\/localhost:8080\/api\nclasspath:examples\/users\/todo-kafka.feature:19\n- com.intuit.karate.core.FeatureResult.getErrorMessagesCombined(FeatureResult.java:215)\n- com.intuit.karate.core.ScenarioEngine.callFeature(ScenarioEngine.java:1951)\n- com.intuit.karate.core.ScenarioEngine.call(ScenarioEngine.java:1849)\n- com.intuit.karate.core.ScenarioBridge.call(ScenarioBridge.java:163)\n- com.intuit.karate.core.ScenarioBridge.call(ScenarioBridge.java:149)\n- <js>.:program(Unnamed:1)\n\nclasspath:examples\/users\/users.feature:13","millis":52.7848,"status":"failed"},"step":{"comments":["# Clear existing todos before each run"],"background":true,"line":13,"prefix":"*","index":7,"text":"def all = karate.call('classpath:examples\/users\/todo-kafka.feature@getAllTodos')"},"stepLog":"00:38:33.420 classpath:examples\/users\/users.feature:13\n* def all = karate.call('classpath:examples\/users\/todo-kafka.feature@getAllTodos')\njs failed:\n>>>>\n01: karate.call('classpath:examples\/users\/todo-kafka.feature@getAllTodos')\n<<<<\norg.graalvm.polyglot.PolyglotException: http call failed after 11 milliseconds for url: http:\/\/localhost:8080\/api\nclasspath:examples\/users\/todo-kafka.feature:19\n- com.intuit.karate.core.FeatureResult.getErrorMessagesCombined(FeatureResult.java:215)\n- com.intuit.karate.core.ScenarioEngine.callFeature(ScenarioEngine.java:1951)\n- com.intuit.karate.core.ScenarioEngine.call(ScenarioEngine.java:1849)\n- com.intuit.karate.core.ScenarioBridge.call(ScenarioBridge.java:163)\n- com.intuit.karate.core.ScenarioBridge.call(ScenarioBridge.java:149)\n- <js>.:program(Unnamed:1)\n\nclasspath:examples\/users\/users.feature:13\n","callResults":[{"failedCount":1,"prefixedPath":"classpath:examples\/users\/todo-kafka.feature","packageQualifiedName":"examples.users.todo-kafka","loopIndex":-1,"relativePath":"examples\/users\/todo-kafka.feature","scenarioResults":[{"sectionIndex":1,"stepResults":[{"result":{"nanos":2747300,"millis":2.7473,"status":"passed"},"step":{"line":18,"prefix":"Given","index":0,"text":"url config.baseUrl"}},{"result":{"nanos":11906000,"errorMessage":"http call failed after 11 milliseconds for url: http:\/\/localhost:8080\/api\nclasspath:examples\/users\/todo-kafka.feature:19","millis":11.906,"status":"failed"},"step":{"line":19,"prefix":"When","index":1,"text":"method get"},"stepLog":"00:38:33.396 request:\n1 > GET http:\/\/localhost:8080\/api\n1 > Host: localhost:8080\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/17.0.12)\n1 > Accept-Encoding: gzip,deflate\n\n\n00:38:33.404 org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost\/127.0.0.1, localhost\/0:0:0:0:0:0:0:1] failed: Connection refused: no further information, http call failed after 11 milliseconds for url: http:\/\/localhost:8080\/api\n00:38:33.405 classpath:examples\/users\/todo-kafka.feature:19\nWhen method get\nhttp call failed after 11 milliseconds for url: http:\/\/localhost:8080\/api\nclasspath:examples\/users\/todo-kafka.feature:19\n"},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":20,"prefix":"Then","index":2,"text":"status 200"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":21,"prefix":"*","index":3,"text":"return response"}}],"line":17,"description":"","durationMillis":14.6533,"failed":true,"error":"http call failed after 11 milliseconds for url: http:\/\/localhost:8080\/api\nclasspath:examples\/users\/todo-kafka.feature:19","tags":["getAllTodos"],"executorName":"main","name":"Get all todos","startTime":1763509113389,"refId":"[2:17]","endTime":1763509113405,"exampleIndex":-1}],"callDepth":1,"name":"Reusable Todo Helper Scenarios","description":"","resultDate":"2025-11-19 12:38:33 am","durationMillis":14.6533,"passedCount":0}]},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"endLine":19,"background":true,"line":14,"prefix":"*","docString":"for (var i = 0; i < all.length; i++) {\n  karate.call('classpath:examples\/users\/todo-kafka.feature@deleteTodo', { id: all[i].id });\n}","index":8,"text":"eval"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"background":true,"line":20,"prefix":"*","index":9,"text":"eval kafkaUtils.consumeMessages(kafkaTopic, consumerGroup, 100, 2)"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"comments":["# Create first todo"],"line":40,"prefix":"*","index":0,"text":"def todo1 = karate.call('classpath:examples\/users\/todo-kafka.feature@createTodo', { title: 'First', complete: false })"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":41,"prefix":"*","index":1,"text":"def id1 = todo1.id"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"comments":["# Fetch by ID"],"line":44,"prefix":"Given","index":2,"text":"url baseUrl + '\/' + id1"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":45,"prefix":"When","index":3,"text":"method get"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":46,"prefix":"Then","index":4,"text":"status 200"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":47,"prefix":"And","index":5,"text":"match response == { id: '#(id1)', title: 'First', complete: false }"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"comments":["# Create second todo"],"line":50,"prefix":"*","index":6,"text":"def todo2 = karate.call('classpath:examples\/users\/todo-kafka.feature@createTodo', { title: 'Second', complete: false })"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":51,"prefix":"*","index":7,"text":"def id2 = todo2.id"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"comments":["# Get all todos"],"line":54,"prefix":"Given","index":8,"text":"url baseUrl"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":55,"prefix":"When","index":9,"text":"method get"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":56,"prefix":"Then","index":10,"text":"status 200"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":57,"prefix":"And","index":11,"text":"match response contains [{ id: '#(id1)', title: 'First', complete: false }, { id: '#(id2)', title: 'Second', complete: false }]"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"comments":["# Verify Kafka delivery for both messages"],"line":60,"prefix":"*","index":12,"text":"def msg1 = kafkaUtils.waitForMessage(kafkaTopic, id1, timeoutMs \/ 1000)"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":61,"prefix":"*","index":13,"text":"def msg2 = kafkaUtils.waitForMessage(kafkaTopic, id2, timeoutMs \/ 1000)"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":62,"prefix":"*","index":14,"text":"match msg1.value contains '\"todoId\":\"#(id1)\"'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":63,"prefix":"*","index":15,"text":"match msg2.value contains '\"todoId\":\"#(id2)\"'"}}],"line":38,"description":"","durationMillis":64.747,"failed":true,"error":"js failed:\n>>>>\n01: karate.call('classpath:examples\/users\/todo-kafka.feature@getAllTodos')\n<<<<\norg.graalvm.polyglot.PolyglotException: http call failed after 11 milliseconds for url: http:\/\/localhost:8080\/api\nclasspath:examples\/users\/todo-kafka.feature:19\n- com.intuit.karate.core.FeatureResult.getErrorMessagesCombined(FeatureResult.java:215)\n- com.intuit.karate.core.ScenarioEngine.callFeature(ScenarioEngine.java:1951)\n- com.intuit.karate.core.ScenarioEngine.call(ScenarioEngine.java:1849)\n- com.intuit.karate.core.ScenarioBridge.call(ScenarioBridge.java:163)\n- com.intuit.karate.core.ScenarioBridge.call(ScenarioBridge.java:149)\n- <js>.:program(Unnamed:1)\n\nclasspath:examples\/users\/users.feature:13","tags":["atdd"],"executorName":"main","name":"CRUD flow and multiple Kafka messages","startTime":1763509113329,"refId":"[2:38]","endTime":1763509113420,"exampleIndex":-1},{"sectionIndex":2,"stepResults":[{"result":{"nanos":948600,"millis":0.9486,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"def config = karate.callSingle('classpath:karate-config.js')"},"stepLog":"00:38:33.466 >>> Environment: dev \n00:38:33.469 >>> baseUrl: http:\/\/localhost:8080\/api \n"},{"result":{"nanos":7901400,"millis":7.9014,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"def baseUrl = config.baseUrl"}},{"result":{"nanos":1212900,"millis":1.2129,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":2,"text":"def KafkaUtils = Java.type('examples.users.KafkaUtils')"}},{"result":{"nanos":1532700,"millis":1.5327,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":3,"text":"def kafkaUtils = new KafkaUtils(config.kafka.bootstrapServers, config.security.kafkaUsername, config.security.kafkaPassword)"}},{"result":{"nanos":944300,"millis":0.9443,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":4,"text":"def kafkaTopic = config.kafka.topics.todoEvents"}},{"result":{"nanos":1134200,"millis":1.1342,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":5,"text":"def consumerGroup = config.kafka.consumerGroup"}},{"result":{"nanos":902200,"millis":0.9022,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":6,"text":"def timeoutMs = config.kafka.timeoutMs"}},{"result":{"nanos":50652100,"errorMessage":"js failed:\n>>>>\n01: karate.call('classpath:examples\/users\/todo-kafka.feature@getAllTodos')\n<<<<\norg.graalvm.polyglot.PolyglotException: http call failed after 10 milliseconds for url: http:\/\/localhost:8080\/api\nclasspath:examples\/users\/todo-kafka.feature:19\n- com.intuit.karate.core.FeatureResult.getErrorMessagesCombined(FeatureResult.java:215)\n- com.intuit.karate.core.ScenarioEngine.callFeature(ScenarioEngine.java:1951)\n- com.intuit.karate.core.ScenarioEngine.call(ScenarioEngine.java:1849)\n- com.intuit.karate.core.ScenarioBridge.call(ScenarioBridge.java:163)\n- com.intuit.karate.core.ScenarioBridge.call(ScenarioBridge.java:149)\n- <js>.:program(Unnamed:1)\n\nclasspath:examples\/users\/users.feature:13","millis":50.6521,"status":"failed"},"step":{"comments":["# Clear existing todos before each run"],"background":true,"line":13,"prefix":"*","index":7,"text":"def all = karate.call('classpath:examples\/users\/todo-kafka.feature@getAllTodos')"},"stepLog":"00:38:33.562 classpath:examples\/users\/users.feature:13\n* def all = karate.call('classpath:examples\/users\/todo-kafka.feature@getAllTodos')\njs failed:\n>>>>\n01: karate.call('classpath:examples\/users\/todo-kafka.feature@getAllTodos')\n<<<<\norg.graalvm.polyglot.PolyglotException: http call failed after 10 milliseconds for url: http:\/\/localhost:8080\/api\nclasspath:examples\/users\/todo-kafka.feature:19\n- com.intuit.karate.core.FeatureResult.getErrorMessagesCombined(FeatureResult.java:215)\n- com.intuit.karate.core.ScenarioEngine.callFeature(ScenarioEngine.java:1951)\n- com.intuit.karate.core.ScenarioEngine.call(ScenarioEngine.java:1849)\n- com.intuit.karate.core.ScenarioBridge.call(ScenarioBridge.java:163)\n- com.intuit.karate.core.ScenarioBridge.call(ScenarioBridge.java:149)\n- <js>.:program(Unnamed:1)\n\nclasspath:examples\/users\/users.feature:13\n","callResults":[{"failedCount":1,"prefixedPath":"classpath:examples\/users\/todo-kafka.feature","packageQualifiedName":"examples.users.todo-kafka","loopIndex":-1,"relativePath":"examples\/users\/todo-kafka.feature","scenarioResults":[{"sectionIndex":1,"stepResults":[{"result":{"nanos":474100,"millis":0.4741,"status":"passed"},"step":{"line":18,"prefix":"Given","index":0,"text":"url config.baseUrl"}},{"result":{"nanos":12129900,"errorMessage":"http call failed after 10 milliseconds for url: http:\/\/localhost:8080\/api\nclasspath:examples\/users\/todo-kafka.feature:19","millis":12.1299,"status":"failed"},"step":{"line":19,"prefix":"When","index":1,"text":"method get"},"stepLog":"00:38:33.543 request:\n1 > GET http:\/\/localhost:8080\/api\n1 > Host: localhost:8080\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/17.0.12)\n1 > Accept-Encoding: gzip,deflate\n\n\n00:38:33.549 org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost\/127.0.0.1, localhost\/0:0:0:0:0:0:0:1] failed: Connection refused: no further information, http call failed after 10 milliseconds for url: http:\/\/localhost:8080\/api\n00:38:33.550 classpath:examples\/users\/todo-kafka.feature:19\nWhen method get\nhttp call failed after 10 milliseconds for url: http:\/\/localhost:8080\/api\nclasspath:examples\/users\/todo-kafka.feature:19\n"},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":20,"prefix":"Then","index":2,"text":"status 200"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":21,"prefix":"*","index":3,"text":"return response"}}],"line":17,"description":"","durationMillis":12.604,"failed":true,"error":"http call failed after 10 milliseconds for url: http:\/\/localhost:8080\/api\nclasspath:examples\/users\/todo-kafka.feature:19","tags":["getAllTodos"],"executorName":"main","name":"Get all todos","startTime":1763509113537,"refId":"[2:17]","endTime":1763509113550,"exampleIndex":-1}],"callDepth":1,"name":"Reusable Todo Helper Scenarios","description":"","resultDate":"2025-11-19 12:38:33 am","durationMillis":12.604,"passedCount":0}]},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"endLine":19,"background":true,"line":14,"prefix":"*","docString":"for (var i = 0; i < all.length; i++) {\n  karate.call('classpath:examples\/users\/todo-kafka.feature@deleteTodo', { id: all[i].id });\n}","index":8,"text":"eval"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"background":true,"line":20,"prefix":"*","index":9,"text":"eval kafkaUtils.consumeMessages(kafkaTopic, consumerGroup, 100, 2)"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":67,"prefix":"*","index":0,"text":"def original = config.kafka.bootstrapServers"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":68,"prefix":"*","index":1,"text":"def KafkaUtils = Java.type('examples.users.KafkaUtils')"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":69,"prefix":"*","index":2,"text":"def failUtils = new KafkaUtils('invalid-broker:9092', '', '')"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":71,"prefix":"Given","index":3,"text":"url baseUrl"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":72,"prefix":"And","index":4,"text":"request { title: 'Kafka Fail Test', complete: false }"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":73,"prefix":"When","index":5,"text":"method post"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":74,"prefix":"Then","index":6,"text":"status 200"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":75,"prefix":"*","index":7,"text":"def failed = karate.read('target\/karate.log').contains('Failed to produce message')"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":76,"prefix":"*","index":8,"text":"assert failed == true"}}],"line":66,"description":"","durationMillis":65.2284,"failed":true,"error":"js failed:\n>>>>\n01: karate.call('classpath:examples\/users\/todo-kafka.feature@getAllTodos')\n<<<<\norg.graalvm.polyglot.PolyglotException: http call failed after 10 milliseconds for url: http:\/\/localhost:8080\/api\nclasspath:examples\/users\/todo-kafka.feature:19\n- com.intuit.karate.core.FeatureResult.getErrorMessagesCombined(FeatureResult.java:215)\n- com.intuit.karate.core.ScenarioEngine.callFeature(ScenarioEngine.java:1951)\n- com.intuit.karate.core.ScenarioEngine.call(ScenarioEngine.java:1849)\n- com.intuit.karate.core.ScenarioBridge.call(ScenarioBridge.java:163)\n- com.intuit.karate.core.ScenarioBridge.call(ScenarioBridge.java:149)\n- <js>.:program(Unnamed:1)\n\nclasspath:examples\/users\/users.feature:13","tags":["errorHandling","atdd"],"executorName":"main","name":"Kafka broker unavailable should fail gracefully","startTime":1763509113454,"refId":"[3:66]","endTime":1763509113562,"exampleIndex":-1}],"callDepth":0,"name":"Todo API End-to-End Flow with Kafka Integration (ATDD)","description":"","resultDate":"2025-11-19 12:38:33 am","durationMillis":1116.267,"passedCount":0}